# Веб-приложение "Калькулятор ИМТ" на Flask

## Что такое Flask?

Flask - это легковесный веб-фреймворк для Python, который позволяет быстро и легко создавать веб-приложения. Он относится к категории микрофреймворков, так как не требует определенных инструментов или библиотек и не имеет слоя абстракции базы данных или валидации форм.

### Основные особенности Flask:

- **Простота**: Минимальный и интуитивно понятный API
- **Расширяемость**: Легко добавлять новую функциональность через расширения
- **Гибкость**: Не навязывает определенную структуру проекта
- **Встроенный сервер разработки**: Удобно для тестирования
- **Поддержка RESTful**: Легко создавать API

### Пример простого Flask-приложения:

```python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Привет, мир!'

if __name__ == '__main__':
    app.run(debug=True)
```

## Что такое Jinja2?

Jinja2 - это мощный и гибкий шаблонизатор для Python, который используется по умолчанию во Flask. Он позволяет отделить логику приложения от представления (HTML), делая код более чистым и поддерживаемым.

### Основные особенности Jinja2:

- **Наследование шаблонов**: Создание базовых шаблонов и их расширение
- **Фильтры**: Модификация переменных при выводе
- **Условия и циклы**: Логика в шаблонах
- **Автоэкранирование**: Защита от XSS-атак
- **Макросы**: Повторное использование HTML-кода

### Синтаксис Jinja2:

В Jinja2 используются различные типы разделителей:

- `{{ ... }}` - для вывода значений переменных
- `{% ... %}` - для выполнения логики (условия, циклы)
- `{# ... #}` - для комментариев (не отображаются в итоговом HTML)

### Отличие `{{ }}` от `{ }`:

- `{{ }}` - специальный синтаксис Jinja2 для вывода значений переменных в шаблоне
- `{ }` - обычные фигурные скобки в языках программирования (Python, JavaScript и т.д.)

В Jinja2 выражение `{{ переменная }}` будет заменено значением переменной при рендеринге шаблона, тогда как `{ }` будет интерпретировано как обычный текст.

### Примеры использования Jinja2:

#### Вывод переменных:

```html
<p>Привет, {{ имя }}!</p>
<p>Ваш возраст: {{ возраст }}</p>
```

#### Условия:

```html
{% if возраст >= 18 %}
    <p>Вы совершеннолетний</p>
{% else %}
    <p>Вы несовершеннолетний</p>
{% endif %}
```

#### Циклы:

```html
<ul>
{% for элемент in список %}
    <li>{{ элемент }}</li>
{% endfor %}
</ul>
```

#### Фильтры:

```html
<p>{{ имя|upper }}</p> <!-- Преобразует имя в верхний регистр -->
<p>{{ текст|truncate(100) }}</p> <!-- Обрезает текст до 100 символов -->
```

#### Наследование шаблонов:

Базовый шаблон (base.html):
```html
<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}Заголовок по умолчанию{% endblock %}</title>
</head>
<body>
    <header>Шапка сайта</header>
    <main>
        {% block content %}{% endblock %}
    </main>
    <footer>Подвал сайта</footer>
</body>
</html>
```

Дочерний шаблон:
```html
{% extends "base.html" %}

{% block title %}Моя страница{% endblock %}

{% block content %}
    <h1>Содержимое моей страницы</h1>
    <p>Дополнительный текст</p>
{% endblock %}
```

## Как Flask и Jinja2 работают вместе?

Flask использует Jinja2 для рендеринга HTML-шаблонов. Когда вы вызываете функцию `render_template()`, Flask передает данные в шаблонизатор Jinja2, который заменяет переменные и выполняет логику, определенную в шаблоне.

### Пример интеграции:

```python
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/привет/<имя>')
def привет(имя):
    return render_template('привет.html', имя=имя)

if __name__ == '__main__':
    app.run(debug=True)
```

Шаблон `привет.html`:
```html
<!DOCTYPE html>
<html>
<head>
    <title>Приветствие</title>
</head>
<body>
    <h1>Привет, {{ имя }}!</h1>
    {% if имя == 'Админ' %}
        <p>Добро пожаловать, администратор!</p>
    {% else %}
        <p>Добро пожаловать на наш сайт!</p>
    {% endif %}
</body>
</html>
```

## Зачем нужны Flask и Jinja2?

### Flask:

- **Быстрая разработка**: Позволяет быстро создавать веб-приложения
- **Простота изучения**: Низкий порог входа для новичков
- **Гибкость**: Можно использовать для различных типов проектов (от простых до сложных)
- **Масштабируемость**: Легко расширяется с помощью дополнительных библиотек
- **Идеален для API**: Хорошо подходит для создания RESTful API

### Jinja2:

- **Отделение логики от представления**: Делает код более чистым и поддерживаемым
- **Повторное использование кода**: Через наследование шаблонов и макросы
- **Безопасность**: Автоматическое экранирование защищает от XSS-атак
- **Гибкость**: Позволяет добавлять логику в шаблоны без смешивания с Python-кодом
- **Производительность**: Компилирует шаблоны в оптимизированный Python-код

## Пример нашего приложения "Калькулятор ИМТ"

В нашем проекте мы используем Flask для обработки запросов и Jinja2 для отображения результатов:

### app.py (Flask):

```python
from flask import Flask, render_template, request

app = Flask(__name__)

@app.route('/', methods=['GET', 'POST'])
def index():
    imt = None
    category = None
    
    if request.method == 'POST':
        weight = float(request.form['weight'])
        height = float(request.form['height']) / 100  # перевод из см в метры
        
        imt = round(weight / (height ** 2), 2)
        
        if imt < 16:
            category = "Выраженный дефицит массы тела"
        elif 16 <= imt < 18.5:
            category = "Недостаточная масса тела"
        # ... и т.д.
    
    return render_template('index.html', imt=imt, category=category)

if __name__ == '__main__':
    app.run(debug=True)
```

### index.html (Jinja2):

```html
<!DOCTYPE html>
<html>
<head>
    <title>Калькулятор ИМТ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
</head>
<body>
    <h1>Калькулятор ИМТ</h1>
    
    <form method="POST">
        <div class="form-group">
            <label for="weight">Вес (кг):</label>
            <input type="number" id="weight" name="weight" required>
        </div>
        
        <div class="form-group">
            <label for="height">Рост (см):</label>
            <input type="number" id="height" name="height" required>
        </div>
        
        <button type="submit">Рассчитать</button>
    </form>
    
    {% if imt %}
    <div class="result">
        <h2>Результат:</h2>
        <p>Ваш ИМТ: {{ imt }}</p>
        <p>Категория: {{ category }}</p>
    </div>
    {% endif %}
</body>
</html>
```

В этом примере:
- Flask обрабатывает GET и POST запросы на главную страницу
- При POST запросе (отправка формы) вычисляется ИМТ и определяется категория
- Jinja2 отображает форму и результаты (если они есть)
- Выражение `{% if imt %}` проверяет, был ли рассчитан ИМТ
- Выражения `{{ imt }}` и `{{ category }}` выводят значения переменных
- `{{ url_for('static', filename='main.css') }}` генерирует URL к статическому файлу
